<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <title>Document</title>
    <style>
        body {
            background: white;
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
        }
        .box {
            position: relative;
            width: 700px;
        }
        video {
            outline: none;
        }
    </style>
</head>
<body>

    <video controls class="vid" id="video" src="./assets/videos/sfondo.mp4" playsinline width="700"></video>
    <div class="box">
        <canvas width="7000"></canvas>
    </div>

    <script>

        Object.defineProperty(HTMLMediaElement.prototype, 'playing', {
            get: function () {
                return !!(this.currentTime > 0 && !this.paused && !this.ended && this.readyState > 2);
            }
        });

        document.body.addEventListener('touchstart', test, true);
        function test() {
            const videoElement = document.getElementById('video');
            if (videoElement.playing) {
                // video is already playing so do nothing
            }
            else {
                // video is not playing
                // so play video now
                videoElement.play();
            }
        };

        // function drawVid () {
        //     ctx.drawImage(video, 0, 0, width, height);
        //     //remove green background
        //     let frame = ctx.getImageData(0, 0, width, height);
        //     for ( let i = 0; i < frame.data.length; i += 4 ) {
        //         let r = frame.data[i]; //red
        //         let g = frame.data[i + 1] //green
        //         let b = frame.data[i + 2] //blue
        //
        //         //green
        //
        //         if ( (r < 80 && g > 80 && b > 80) || (r > 70 && r < 150 && g > 120 && g < 200 && b > 70 && b < 150) ) {
        //             frame.data[i + 3] = 0 //alpha
        //         }
        //
        //         //yellow
        //
        //         // if ( r > 90 && g > 90 && b < 50 ) {
        //         //     frame.data[i + 3] = 0 //alpha
        //         // }
        //
        //         //blue
        //
        //         // if ( r > 90 && g > 90 && b < 50 ) {
        //         //     frame.data[i + 3] = 0 //alpha
        //         // }
        //     }
        //     ctx.putImageData(frame, 0, 0);
        //     requestAnimationFrame(drawVid);
        // }

    </script>
</body>
</html>